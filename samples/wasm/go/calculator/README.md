# Go WASM app

Used tinygo 0.28.1 in combination with go 1.20 and binaryen 114 on Windows 11

See [Tinygo](https://tinygo.org/)

Go 1.12 intrduces WASI support, but suffers from lack of export, i.e. you can
currently only have WASM / WASI with a `main` function.

The wasm file generated by tinygo is in fact a wasi file regardless of the target
as it imports `fd_write` from `wasi_unstable` as this is used by the tinygo runtime.

## How to build and call

`Powershell`

Build module:

```Powershell
PS> tinygo build -o .\calculator-in-go.wasm -target wasm .\calculator.go
```

Call module:

```Powershell
PS> wasmtime calculator-in-go.wasm --invoke add 41 1
PS> wasmtime calculator-in-go.wasm --invoke subtract 41 1
```

